name: ğŸš€ Publish

on:
  # Disabled for fork - only manual trigger
  workflow_dispatch:
  # push:
  #   tags:
  #     - 'v*'

jobs:
  lint:
    name: ğŸ§¹ lint
    uses: ./.github/workflows/reusable-lint.yml

  test:
    name: ğŸ§ª test
    uses: ./.github/workflows/reusable-test.yml
    needs: lint

  pypi:
    name: ğŸ“¦ pypi
    uses: ./.github/workflows/reusable-pypi.yml
    needs: test
    secrets: inherit

  docker:
    name: ğŸ³ docker
    uses: ./.github/workflows/reusable-docker.yml
    needs: pypi
    secrets: inherit
